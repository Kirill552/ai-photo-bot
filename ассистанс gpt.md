Помощники
Бета
Создавайте помощников, которые могут вызывать модели и использовать инструменты для выполнения задач.

Начните работу с API-интерфейсом Assistants

Создать помощника
Бета
post
 
https://api.openai.com/v1/assistants
Создайте помощника с моделью и инструкциями.

Тело запроса
Модель
строка

Требуемый
Идентификатор используемой модели. Вы можете использовать API «Список моделей», чтобы просмотреть все доступные модели, или ознакомиться с их описанием в «Обзоре моделей».

Описание
строка или null

Необязательный
Описание помощника. Максимальная длина — 512 символов.

Инструкции
строка или null

Необязательный
Системные инструкции, которые использует помощник. Максимальная длина — 256 000 символов.

метаданные
Карта

Необязательный
Набор из 16 пар «ключ-значение», которые можно прикрепить к объекту. Это может быть полезно для хранения дополнительной информации об объекте в структурированном формате, а также для поиска объектов через API или панель управления.

Ключи — это строки максимальной длиной 64 символа. Значения — это строки максимальной длиной 512 символов.

Имя
строка или null

Необязательный
Имя помощника. Максимальная длина — 256 символов.

рассуждение_эффект
строка или null

Необязательный
По умолчанию используется значение medium
только модели серии o

Ограничивает усилия по обработке данных для моделей обработки данных. В настоящее время поддерживаются значения low, medium, и high. Сокращение усилий по обработке данных может привести к ускорению ответов и уменьшению количества токенов, используемых для обработки данных в ответе.

формат_ответа
«авто» или объект

Необязательный
Указывает формат, который должна выдавать модель. Совместимо с GPT-4o, GPT-4 Turbo и всеми моделями GPT-3.5 Turbo, начиная с gpt-3.5-turbo-1106.

При значении { "type": "json_schema", "json_schema": {...} } включаются структурированные выходные данные, которые обеспечивают соответствие модели предоставленной вами схеме JSON. Подробнее см. в руководстве по структурированным выходным данным.

При установке значения { "type": "json_object" } включается режим JSON, который гарантирует, что сгенерированное моделью сообщение будет корректным JSON.

Важно: при использовании режима JSON вы должны также указать модели, что она должна самостоятельно генерировать JSON с помощью системного или пользовательского сообщения. Без этого модель может генерировать бесконечный поток пробелов до тех пор, пока генерация не достигнет лимита токенов, что приведёт к длительному и, по-видимому, «застрявшему» запросу. Также обратите внимание, что содержимое сообщения может быть частично обрезано, если finish_reason="length", что указывает на то, что генерация превысила max_tokens или разговор превысил максимальную длину контекста.


Показать возможные типы
температура
число или null

Необязательный
Значение по умолчанию равно 1
Какую температуру выборки использовать — от 0 до 2. Более высокие значения, например 0,8, сделают результат более случайным, а более низкие значения, например 0,2, сделают его более целенаправленным и детерминированным.

tool_resources инструмент_ресурсы
объект или нуль

Необязательный
Набор ресурсов, используемых инструментами помощника. Ресурсы зависят от типа инструмента. Например, для инструмента code_interpreter требуется список идентификаторов файлов, а для инструмента file_search — список идентификаторов векторных хранилищ.


Показать свойства
Инструменты
массив

Необязательный
Значение по умолчанию равно []
Список инструментов, доступных помощнику. На одного помощника может быть установлено не более 128 инструментов. Инструменты могут быть следующих типов: code_interpreter, file_search, или function.


Показать возможные типы
top_p
число или null

Необязательный
Значение по умолчанию равно 1
Альтернативой выборке с температурой является ядерная выборка, при которой модель учитывает результаты токенов с наибольшей вероятностью. Таким образом, 0,1 означает, что учитываются только токены, составляющие 10% от общей вероятности.

Обычно мы рекомендуем менять либо это, либо температуру, но не оба параметра одновременно.

ВОЗВРАТ
Дополнительный объект.


Интерпретатор кода

Файлы
Пример запроса
curl "https://api.openai.com/v1/assistants" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $OPENAI_API_KEY" \
  -H "OpenAI-Beta: assistants=v2" \
  -d '{
    "instructions": "You are a personal math tutor. When asked a question, write and run Python code to answer the question.",
    "name": "Math Tutor",
    "tools": [{"type": "code_interpreter"}],
    "model": "gpt-4o"
  }'
Ответ
{
  "id": "asst_abc123",
  "object": "assistant",
  "created_at": 1698984975,
  "name": "Math Tutor",
  "description": null,
  "model": "gpt-4o",
  "instructions": "You are a personal math tutor. When asked a question, write and run Python code to answer the question.",
  "tools": [
    {
      "type": "code_interpreter"
    }
  ],
  "metadata": {},
  "top_p": 1.0,
  "temperature": 1.0,
  "response_format": "auto"
}
Список помощников
Бета
получить
 
https://api.openai.com/v1/помощники
Возвращает список помощников.

Параметры запроса
после
строка

Необязательный
Курсор для использования в разбивке на страницы. after — это идентификатор объекта, определяющий ваше место в списке. Например, если вы отправляете запрос на получение списка и получаете 100 объектов, заканчивающихся на obj_foo, ваш последующий вызов может включать after=obj_foo, чтобы получить следующую страницу списка.

до того , как
строка

Необязательный
Курсор для использования в разбиении на страницы. before — это идентификатор объекта, определяющий ваше место в списке. Например, если вы отправляете запрос на получение списка и получаете 100 объектов, начиная с obj_foo, ваш последующий вызов может включать параметр before=obj_foo, чтобы получить предыдущую страницу списка.

предел
целое число

Необязательный
Значение по умолчанию равно 20
Ограничение на количество возвращаемых объектов. Ограничение может составлять от 1 до 100, по умолчанию — 20.

порядок
строка

Необязательный
Значение по умолчанию равно desc
Сортировка по метке времени created_at объектов. asc для сортировки по возрастанию и desc для сортировки по убыванию.

ВОЗВРАТ
Список вспомогательных объектов.

Пример запроса
curl "https://api.openai.com/v1/assistants?order=desc&limit=20" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $OPENAI_API_KEY" \
  -H "OpenAI-Beta: assistants=v2"
Ответ
{
  "object": "list",
  "data": [
    {
      "id": "asst_abc123",
      "object": "assistant",
      "created_at": 1698982736,
      "name": "Coding Tutor",
      "description": null,
      "model": "gpt-4o",
      "instructions": "You are a helpful assistant designed to make me better at coding!",
      "tools": [],
      "tool_resources": {},
      "metadata": {},
      "top_p": 1.0,
      "temperature": 1.0,
      "response_format": "auto"
    },
    {
      "id": "asst_abc456",
      "object": "assistant",
      "created_at": 1698982718,
      "name": "My Assistant",
      "description": null,
      "model": "gpt-4o",
      "instructions": "You are a helpful assistant designed to make me better at coding!",
      "tools": [],
      "tool_resources": {},
      "metadata": {},
      "top_p": 1.0,
      "temperature": 1.0,
      "response_format": "auto"
    },
    {
      "id": "asst_abc789",
      "object": "assistant",
      "created_at": 1698982643,
      "name": null,
      "description": null,
      "model": "gpt-4o",
      "instructions": null,
      "tools": [],
      "tool_resources": {},
      "metadata": {},
      "top_p": 1.0,
      "temperature": 1.0,
      "response_format": "auto"
    }
  ],
  "first_id": "asst_abc123",
  "last_id": "asst_abc789",
  "has_more": false
}
Получить помощника
Бета
получить
 
https://api.openai.com/v1/помощники/{идентификатор_помощника}
Вызывает помощника.

Параметры пути
assistant_id
строка

Требуемый
Идентификационный номер помощника для получения информации.

ВОЗВРАТ
Объект помощник, соответствующий указанному идентификатору.

Пример запроса
curl https://api.openai.com/v1/assistants/asst_abc123 \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $OPENAI_API_KEY" \
  -H "OpenAI-Beta: assistants=v2"
Ответ
{
  "id": "asst_abc123",
  "object": "assistant",
  "created_at": 1699009709,
  "name": "HR Helper",
  "description": null,
  "model": "gpt-4o",
  "instructions": "You are an HR bot, and you have access to files to answer employee questions about company policies.",
  "tools": [
    {
      "type": "file_search"
    }
  ],
  "metadata": {},
  "top_p": 1.0,
  "temperature": 1.0,
  "response_format": "auto"
}
Изменить помощника
Бета
post
 
https://api.openai.com/v1/assistants/{assistant_id}
Изменяет помощника.

Параметры пути
assistant_id
строка

Требуемый
Идентификатор помощника для внесения изменений.

Тело запроса
Описание
строка или null

Необязательный
Описание помощника. Максимальная длина — 512 символов.

Инструкции
строка или null

Необязательный
Системные инструкции, которые использует помощник. Максимальная длина — 256 000 символов.

метаданные
Карта

Необязательный
Набор из 16 пар «ключ-значение», которые можно прикрепить к объекту. Это может быть полезно для хранения дополнительной информации об объекте в структурированном формате, а также для поиска объектов через API или панель управления.

Ключи — это строки максимальной длиной 64 символа. Значения — это строки максимальной длиной 512 символов.

Модель
строка

Необязательный
Идентификатор используемой модели. Вы можете использовать API «Список моделей», чтобы просмотреть все доступные модели, или ознакомиться с их описанием в «Обзоре моделей».

Имя
строка или null

Необязательный
Имя помощника. Максимальная длина — 256 символов.

рассуждение_эффект
строка или null

Необязательный
По умолчанию используется значение medium
только модели серии o

Ограничивает усилия по обработке данных для моделей обработки данных. В настоящее время поддерживаются значения low, medium, и high. Сокращение усилий по обработке данных может привести к ускорению ответов и уменьшению количества токенов, используемых для обработки данных в ответе.

формат_ответа
«авто» или объект

Необязательный
Указывает формат, который должна выдавать модель. Совместимо с GPT-4o, GPT-4 Turbo и всеми моделями GPT-3.5 Turbo, начиная с gpt-3.5-turbo-1106.

При значении { "type": "json_schema", "json_schema": {...} } включаются структурированные выходные данные, которые обеспечивают соответствие модели предоставленной вами схеме JSON. Подробнее см. в руководстве по структурированным выходным данным.

При установке значения { "type": "json_object" } включается режим JSON, который гарантирует, что сгенерированное моделью сообщение будет корректным JSON.

Важно: при использовании режима JSON вы должны также указать модели, что она должна самостоятельно генерировать JSON с помощью системного или пользовательского сообщения. Без этого модель может генерировать бесконечный поток пробелов до тех пор, пока генерация не достигнет лимита токенов, что приведёт к длительному и, по-видимому, «застрявшему» запросу. Также обратите внимание, что содержимое сообщения может быть частично обрезано, если finish_reason="length", что указывает на то, что генерация превысила max_tokens или разговор превысил максимальную длину контекста.


Показать возможные типы
температура
число или null

Необязательный
Значение по умолчанию равно 1
Какую температуру выборки использовать — от 0 до 2. Более высокие значения, например 0,8, сделают результат более случайным, а более низкие значения, например 0,2, сделают его более целенаправленным и детерминированным.

tool_resources инструмент_ресурсы
объект или нуль

Необязательный
Набор ресурсов, используемых инструментами помощника. Ресурсы зависят от типа инструмента. Например, для инструмента code_interpreter требуется список идентификаторов файлов, а для инструмента file_search — список идентификаторов векторных хранилищ.


Показать свойства
Инструменты
массив

Необязательный
Значение по умолчанию равно []
Список инструментов, доступных помощнику. На одного помощника может быть установлено не более 128 инструментов. Инструменты могут быть следующих типов: code_interpreter, file_search, или function.


Показать возможные типы
top_p
число или null

Необязательный
Значение по умолчанию равно 1
Альтернативой выборке с температурой является ядерная выборка, при которой модель учитывает результаты токенов с наибольшей вероятностью. Таким образом, 0,1 означает, что учитываются только токены, составляющие 10% от общей вероятности.

Обычно мы рекомендуем менять либо это, либо температуру, но не оба параметра одновременно.

ВОЗВРАТ
Модифицированный объект помощник.

Пример запроса
curl https://api.openai.com/v1/assistants/asst_abc123 \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $OPENAI_API_KEY" \
  -H "OpenAI-Beta: assistants=v2" \
  -d '{
      "instructions": "You are an HR bot, and you have access to files to answer employee questions about company policies. Always response with info from either of the files.",
      "tools": [{"type": "file_search"}],
      "model": "gpt-4o"
    }'
Ответ
{
  "id": "asst_123",
  "object": "assistant",
  "created_at": 1699009709,
  "name": "HR Helper",
  "description": null,
  "model": "gpt-4o",
  "instructions": "You are an HR bot, and you have access to files to answer employee questions about company policies. Always response with info from either of the files.",
  "tools": [
    {
      "type": "file_search"
    }
  ],
  "tool_resources": {
    "file_search": {
      "vector_store_ids": []
    }
  },
  "metadata": {},
  "top_p": 1.0,
  "temperature": 1.0,
  "response_format": "auto"
}
Удалить помощника
Бета
удалить
 
https://api.openai.com/v1/assistants/{идентификатор_помощника}
Удалите помощника.

Параметры пути
assistant_id
строка

Требуемый
Идентификатор помощника, которого нужно удалить.

ВОЗВРАТ
Статус удаления

Пример запроса
curl https://api.openai.com/v1/assistants/asst_abc123 \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $OPENAI_API_KEY" \
  -H "OpenAI-Beta: assistants=v2" \
  -X DELETE
Ответ
{
  "id": "asst_abc123",
  "object": "assistant.deleted",
  "deleted": true
}
Объект-помощник
Бета
Представляет собой assistant, который может вызывать модель и использовать инструменты.

созданный_ат
целое число

Временная метка Unix (в секундах), указывающая на время создания помощника.

Описание
строка или null

Описание помощника. Максимальная длина — 512 символов.

ID
строка

Идентификатор, на который можно ссылаться в конечных точках API.

Инструкции
строка или null

Системные инструкции, которые использует помощник. Максимальная длина — 256 000 символов.

метаданные
Карта

Набор из 16 пар «ключ-значение», которые можно прикрепить к объекту. Это может быть полезно для хранения дополнительной информации об объекте в структурированном формате, а также для поиска объектов через API или панель управления.

Ключи — это строки максимальной длиной 64 символа. Значения — это строки максимальной длиной 512 символов.

Модель
строка

Идентификатор используемой модели. Вы можете использовать API «Список моделей», чтобы просмотреть все доступные модели, или ознакомиться с их описанием в «Обзоре моделей».

Имя
строка или null

Имя помощника. Максимальная длина — 256 символов.

объект
строка

Тип объекта, который всегда обозначается как assistant.

формат_ответа
«авто» или объект

Указывает формат, который должна выдавать модель. Совместимо с GPT-4o, GPT-4 Turbo и всеми моделями GPT-3.5 Turbo, начиная с gpt-3.5-turbo-1106.

При значении { "type": "json_schema", "json_schema": {...} } включаются структурированные выходные данные, которые обеспечивают соответствие модели предоставленной вами схеме JSON. Подробнее см. в руководстве по структурированным выходным данным.

При установке значения { "type": "json_object" } включается режим JSON, который гарантирует, что сгенерированное моделью сообщение будет корректным JSON.

Важно: при использовании режима JSON вы должны также указать модели, что она должна самостоятельно генерировать JSON с помощью системного или пользовательского сообщения. Без этого модель может генерировать бесконечный поток пробелов до тех пор, пока генерация не достигнет лимита токенов, что приведёт к длительному и, по-видимому, «застрявшему» запросу. Также обратите внимание, что содержимое сообщения может быть частично обрезано, если finish_reason="length", что указывает на то, что генерация превысила max_tokens или разговор превысил максимальную длину контекста.


Показать возможные типы
температура
число или null

Какую температуру выборки использовать — от 0 до 2. Более высокие значения, например 0,8, сделают результат более случайным, а более низкие значения, например 0,2, сделают его более целенаправленным и детерминированным.

tool_resources инструмент_ресурсы
объект или нуль

Набор ресурсов, используемых инструментами помощника. Ресурсы зависят от типа инструмента. Например, для инструмента code_interpreter требуется список идентификаторов файлов, а для инструмента file_search — список идентификаторов векторных хранилищ.


Показать свойства
Инструменты
массив

Список инструментов, доступных помощнику. На одного помощника может быть установлено не более 128 инструментов. Инструменты могут быть следующих типов: code_interpreter, file_search, или function.


Показать возможные типы
top_p
число или null

Альтернативой выборке с температурой является ядерная выборка, при которой модель учитывает результаты токенов с наибольшей вероятностью. Таким образом, 0,1 означает, что учитываются только токены, составляющие 10% от общей вероятности.

Обычно мы рекомендуем менять либо это, либо температуру, но не оба параметра одновременно.

ОБЪЕКТ-помощник объекта
{
  "id": "asst_abc123",
  "object": "assistant",
  "created_at": 1698984975,
  "name": "Math Tutor",
  "description": null,
  "model": "gpt-4o",
  "instructions": "You are a personal math tutor. When asked a question, write and run Python code to answer the question.",
  "tools": [
    {
      "type": "code_interpreter"
    }
  ],
  "metadata": {},
  "top_p": 1.0,
  "temperature": 1.0,
  "response_format": "auto"
}
Ветки
Бета
Создавайте темы, с которыми могут взаимодействовать помощники.

Соответствующее руководство: Помощники

Создать поток
Бета
пост
 
https://api.openai.com/v1/threads
Создайте поток.

Тело запроса
Сообщения
массив

Необязательный
Список сообщений для начала обсуждения.


Показать свойства
метаданные
Карта

Необязательный
Набор из 16 пар «ключ-значение», которые можно прикрепить к объекту. Это может быть полезно для хранения дополнительной информации об объекте в структурированном формате, а также для поиска объектов через API или панель управления.

Ключи — это строки максимальной длиной 64 символа. Значения — это строки максимальной длиной 512 символов.

tool_resources инструмент_ресурсы
объект или нуль

Необязательный
Набор ресурсов, доступных инструментам помощника в этом потоке. Ресурсы зависят от типа инструмента. Например, для инструмента code_interpreter требуется список идентификаторов файлов, а для инструмента file_search — список идентификаторов векторных хранилищ.


Показать свойства
ВОЗВРАТ
Объект потока.


Пусто

Сообщения
Пример запроса
curl https://api.openai.com/v1/threads \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $OPENAI_API_KEY" \
  -H "OpenAI-Beta: assistants=v2" \
  -d ''
Ответ
{
  "id": "thread_abc123",
  "object": "thread",
  "created_at": 1699012949,
  "metadata": {},
  "tool_resources": {}
}
Извлекать поток
Бета
получить
 
https://api.openai.com/v1/threads/{идентификатор_темы}
Извлекает нить.

Параметры пути
thread_id
строка

Требуемый
Идентификатор потока для получения данных.

ВОЗВРАТ
Объект потока, соответствующий указанному идентификатору.

Пример запроса
curl https://api.openai.com/v1/threads/thread_abc123 \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $OPENAI_API_KEY" \
  -H "OpenAI-Beta: assistants=v2"
Ответ
{
  "id": "thread_abc123",
  "object": "thread",
  "created_at": 1699014083,
  "metadata": {},
  "tool_resources": {
    "code_interpreter": {
      "file_ids": []
    }
  }
}
Изменить поток
Бета
пост
 
https://api.openai.com/v1/threads/{идентификатор_потока}
Изменяет поток.

Параметры пути
thread_id
строка

Требуемый
Идентификатор потока, который необходимо изменить. Можно изменить только metadata

Тело запроса
метаданные
Карта

Необязательный
Набор из 16 пар «ключ-значение», которые можно прикрепить к объекту. Это может быть полезно для хранения дополнительной информации об объекте в структурированном формате, а также для поиска объектов через API или панель управления.

Ключи — это строки максимальной длиной 64 символа. Значения — это строки максимальной длиной 512 символов.

tool_resources инструмент_ресурсы
объект или нуль

Необязательный
Набор ресурсов, доступных инструментам помощника в этом потоке. Ресурсы зависят от типа инструмента. Например, для инструмента code_interpreter требуется список идентификаторов файлов, а для инструмента file_search — список идентификаторов векторных хранилищ.


Показать свойства
ВОЗВРАТ
Изменённый объект потока, соответствующий указанному идентификатору.

Пример запроса
curl https://api.openai.com/v1/threads/thread_abc123 \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $OPENAI_API_KEY" \
  -H "OpenAI-Beta: assistants=v2" \
  -d '{
      "metadata": {
        "modified": "true",
        "user": "abc123"
      }
    }'
Ответ
{
  "id": "thread_abc123",
  "object": "thread",
  "created_at": 1699014083,
  "metadata": {
    "modified": "true",
    "user": "abc123"
  },
  "tool_resources": {}
}
Удалить поток
Бета
удалить
 
https://api.openai.com/v1/threads/{идентификатор_темы}
Удалите поток.

Параметры пути
thread_id
строка

Требуемый
Идентификатор потока, который нужно удалить.

ВОЗВРАТ
Статус удаления

Пример запроса
curl https://api.openai.com/v1/threads/thread_abc123 \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $OPENAI_API_KEY" \
  -H "OpenAI-Beta: assistants=v2" \
  -X DELETE
Ответ
{
  "id": "thread_abc123",
  "object": "thread.deleted",
  "deleted": true
}
Объект thread (поток)
Бета
Представляет собой поток, содержащий сообщения.

созданный_ат
целое число

Метка времени Unix (в секундах) для момента создания потока.

ID
строка

Идентификатор, на который можно ссылаться в конечных точках API.

метаданные
Карта

Набор из 16 пар «ключ-значение», которые можно прикрепить к объекту. Это может быть полезно для хранения дополнительной информации об объекте в структурированном формате, а также для поиска объектов через API или панель управления.

Ключи — это строки максимальной длиной 64 символа. Значения — это строки максимальной длиной 512 символов.

объект
строка

Тип объекта, который всегда обозначается как thread.

tool_resources инструмент_ресурсы
объект или нуль

Набор ресурсов, доступных инструментам помощника в этом потоке. Ресурсы зависят от типа инструмента. Например, для инструмента code_interpreter требуется список идентификаторов файлов, а для инструмента file_search — список идентификаторов векторных хранилищ.


Показать свойства
ОБЪЕКТ Объект потока
{
  "id": "thread_abc123",
  "object": "thread",
  "created_at": 1698107661,
  "metadata": {}
}
Сообщения
Бета
Создание сообщений в потоках

Соответствующее руководство: Помощники

Создать сообщение
Бета
пост
 
https://api.openai.com/v1/threads/{идентификатор_потока}/messages
Создайте сообщение.

Параметры пути
thread_id
строка

Требуемый
Идентификатор темы, для которой нужно создать сообщение.

Тело запроса
Содержание
строка или массив

Требуемый

Показать возможные типы
Роль
строка

Требуемый
Роль объекта, создающего сообщение. Допустимые значения:

userУказывает на то, что сообщение отправлено реальным пользователем, и в большинстве случаев его следует использовать для обозначения пользовательских сообщений.
assistant: Указывает на то, что сообщение сгенерировано помощником. Используйте это значение, чтобы вставлять сообщения от помощника в диалог.
вложения
массив или null

Необязательный
Список файлов, прикреплённых к сообщению, и инструментов, к которым они должны быть добавлены.


Показать свойства
метаданные
Карта

Необязательный
Набор из 16 пар «ключ-значение», которые можно прикрепить к объекту. Это может быть полезно для хранения дополнительной информации об объекте в структурированном формате, а также для поиска объектов через API или панель управления.

Ключи — это строки максимальной длиной 64 символа. Значения — это строки максимальной длиной 512 символов.

ВОЗВРАТ
Объект сообщения.

Пример запроса
curl https://api.openai.com/v1/threads/thread_abc123/messages \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $OPENAI_API_KEY" \
  -H "OpenAI-Beta: assistants=v2" \
  -d '{
      "role": "user",
      "content": "How does AI work? Explain it in simple terms."
    }'
Ответ
{
  "id": "msg_abc123",
  "object": "thread.message",
  "created_at": 1713226573,
  "assistant_id": null,
  "thread_id": "thread_abc123",
  "run_id": null,
  "role": "user",
  "content": [
    {
      "type": "text",
      "text": {
        "value": "How does AI work? Explain it in simple terms.",
        "annotations": []
      }
    }
  ],
  "attachments": [],
  "metadata": {}
}
Список сообщений
Бета
получить
 
https://api.openai.com/v1/threads/{идентификатор_темы}/messages
Возвращает список сообщений для заданной темы.

Параметры пути
thread_id
строка

Требуемый
Идентификатор темы, к которой относятся сообщения.

Параметры запроса
после
строка

Необязательный
Курсор для использования в разбивке на страницы. after — это идентификатор объекта, определяющий ваше место в списке. Например, если вы отправляете запрос на получение списка и получаете 100 объектов, заканчивающихся на obj_foo, ваш последующий вызов может включать after=obj_foo, чтобы получить следующую страницу списка.

до того , как
строка

Необязательный
Курсор для использования в разбиении на страницы. before — это идентификатор объекта, определяющий ваше место в списке. Например, если вы отправляете запрос на получение списка и получаете 100 объектов, начиная с obj_foo, ваш последующий вызов может включать параметр before=obj_foo, чтобы получить предыдущую страницу списка.

предел
целое число

Необязательный
Значение по умолчанию равно 20
Ограничение на количество возвращаемых объектов. Ограничение может составлять от 1 до 100, по умолчанию — 20.

порядок
строка

Необязательный
Значение по умолчанию равно desc
Сортировка по метке времени created_at объектов. asc для сортировки по возрастанию и desc для сортировки по убыванию.

run_id ( идентификатор запуска )
строка

Необязательный
Отфильтруйте сообщения по идентификатору запуска, который их сгенерировал.

ВОЗВРАТ
Список объектов сообщений.

Пример запроса
curl https://api.openai.com/v1/threads/thread_abc123/messages \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $OPENAI_API_KEY" \
  -H "OpenAI-Beta: assistants=v2"
Ответ
{
  "object": "list",
  "data": [
    {
      "id": "msg_abc123",
      "object": "thread.message",
      "created_at": 1699016383,
      "assistant_id": null,
      "thread_id": "thread_abc123",
      "run_id": null,
      "role": "user",
      "content": [
        {
          "type": "text",
          "text": {
            "value": "How does AI work? Explain it in simple terms.",
            "annotations": []
          }
        }
      ],
      "attachments": [],
      "metadata": {}
    },
    {
      "id": "msg_abc456",
      "object": "thread.message",
      "created_at": 1699016383,
      "assistant_id": null,
      "thread_id": "thread_abc123",
      "run_id": null,
      "role": "user",
      "content": [
        {
          "type": "text",
          "text": {
            "value": "Hello, what is AI?",
            "annotations": []
          }
        }
      ],
      "attachments": [],
      "metadata": {}
    }
  ],
  "first_id": "msg_abc123",
  "last_id": "msg_abc456",
  "has_more": false
}
Получить сообщение
Бета
получить
 
https://api.openai.com/v1/threads/{идентификатор_темы}/messages/{идентификатор_сообщения}
Получить сообщение.

Параметры пути
message_id - идентификатор сообщения
строка

Требуемый
Идентификатор сообщения для получения.

thread_id
строка

Требуемый
Идентификатор потока, к которому относится это сообщение.

ВОЗВРАТ
Объект сообщение соответствует указанному идентификатору.

Пример запроса
curl https://api.openai.com/v1/threads/thread_abc123/messages/msg_abc123 \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $OPENAI_API_KEY" \
  -H "OpenAI-Beta: assistants=v2"
Ответ
{
  "id": "msg_abc123",
  "object": "thread.message",
  "created_at": 1699017614,
  "assistant_id": null,
  "thread_id": "thread_abc123",
  "run_id": null,
  "role": "user",
  "content": [
    {
      "type": "text",
      "text": {
        "value": "How does AI work? Explain it in simple terms.",
        "annotations": []
      }
    }
  ],
  "attachments": [],
  "metadata": {}
}
Изменить сообщение
Бета
post
 
https://api.openai.com/v1/threads/{thread_id}/messages/{message_id}
Изменяет сообщение.

Параметры пути
message_id - идентификатор сообщения
строка

Требуемый
Идентификатор сообщения, которое необходимо изменить.

thread_id
строка

Требуемый
Идентификатор потока, к которому относится это сообщение.

Тело запроса
метаданные
Карта

Необязательный
Набор из 16 пар «ключ-значение», которые можно прикрепить к объекту. Это может быть полезно для хранения дополнительной информации об объекте в структурированном формате, а также для поиска объектов через API или панель управления.

Ключи — это строки максимальной длиной 64 символа. Значения — это строки максимальной длиной 512 символов.

ВОЗВРАТ
Изменённый объект сообщения.

Пример запроса
curl https://api.openai.com/v1/threads/thread_abc123/messages/msg_abc123 \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $OPENAI_API_KEY" \
  -H "OpenAI-Beta: assistants=v2" \
  -d '{
      "metadata": {
        "modified": "true",
        "user": "abc123"
      }
    }'
Ответ
{
  "id": "msg_abc123",
  "object": "thread.message",
  "created_at": 1699017614,
  "assistant_id": null,
  "thread_id": "thread_abc123",
  "run_id": null,
  "role": "user",
  "content": [
    {
      "type": "text",
      "text": {
        "value": "How does AI work? Explain it in simple terms.",
        "annotations": []
      }
    }
  ],
  "file_ids": [],
  "metadata": {
    "modified": "true",
    "user": "abc123"
  }
}
Удалить сообщение
Бета
удалить
 
https://api.openai.com/v1/threads/{thread_id}/messages/{message_id}
Удаляет сообщение.

Параметры пути
message_id - идентификатор сообщения
строка

Требуемый
Идентификатор сообщения для удаления.

thread_id
строка

Требуемый
Идентификатор потока, к которому относится это сообщение.

ВОЗВРАТ
Статус удаления

Пример запроса
curl -X DELETE https://api.openai.com/v1/threads/thread_abc123/messages/msg_abc123 \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $OPENAI_API_KEY" \
  -H "OpenAI-Beta: assistants=v2"
Ответ
{
  "id": "msg_abc123",
  "object": "thread.message.deleted",
  "deleted": true
}
Объект сообщения
Бета
Представляет собой сообщение в последовательности.

assistant_id
строка или null

Если применимо, укажите идентификатор помощника, который отправил это сообщение.

вложения
массив или null

Список файлов, прикреплённых к сообщению, и инструментов, к которым они были добавлены.


Показать свойства
завершенный_ат
целое число или null

Временная метка Unix (в секундах) для обозначения времени создания сообщения.

Содержание
массив

Содержимое сообщения в виде массива текста и/или изображений.


Показать возможные типы
созданный_ат
целое число

Временная метка Unix (в секундах), указывающая на время создания сообщения.

ID
строка

Идентификатор, на который можно ссылаться в конечных точках API.

незавершен - ный
целое число или null

Временная метка Unix (в секундах), указывающая на то, когда сообщение было помечено как неполное.

незавершенные детали
объект или нуль

В незавершённом сообщении укажите причину, по которой оно не завершено.


Показать свойства
метаданные
Карта

Набор из 16 пар «ключ-значение», которые можно прикрепить к объекту. Это может быть полезно для хранения дополнительной информации об объекте в структурированном формате, а также для поиска объектов через API или панель управления.

Ключи — это строки максимальной длиной 64 символа. Значения — это строки максимальной длиной 512 символов.

объект
строка

Тип объекта, который всегда обозначается как thread.message.

Роль
строка

Объект, который отправил сообщение. Один из user или assistant.

run_id ( идентификатор запуска )
строка или null

Идентификатор выполнения, связанного с созданием этого сообщения. Значение равно null при создании сообщений вручную с помощью конечных точек создания сообщения или создания потока.

Статус
строка

Статус сообщения, который может быть in_progress. incomplete. completed.

thread_id
строка

Идентификатор потока, к которому относится это сообщение.

ОБЪЕКТ Объект сообщения
{
  "id": "msg_abc123",
  "object": "thread.message",
  "created_at": 1698983503,
  "thread_id": "thread_abc123",
  "role": "assistant",
  "content": [
    {
      "type": "text",
      "text": {
        "value": "Hi! How can I help you today?",
        "annotations": []
      }
    }
  ],
  "assistant_id": "asst_abc123",
  "run_id": "run_abc123",
  "attachments": [],
  "metadata": {}
}
Бежит
Бета
Представляет собой выполнение задачи в потоке.

Соответствующее руководство: Помощники

Создать , запустить
Бета
post
 
https://api.openai.com/v1/threads/{thread_id}/runs
Создайте прогон.

Параметры пути
thread_id
строка

Требуемый
Идентификатор запускаемого потока.

Параметры запроса
включить[]
массив

Необязательный
Список дополнительных полей для включения в ответ. В настоящее время поддерживается только значение step_details.tool_calls[*].file_search.results[*].content для получения содержимого результатов поиска файлов.

Дополнительную информацию см. в документации по инструменту поиска файлов.

Тело запроса
assistant_id
строка

Требуемый
Идентификатор помощника, который будет использоваться для выполнения этого задания.

дополнительные_инструкции
строка или null

Необязательный
Добавляет дополнительные инструкции в конец списка инструкций для выполнения. Это полезно для изменения поведения при каждом выполнении без переопределения других инструкций.

дополнительные_сообщения
массив или null

Необязательный
Добавляет дополнительные сообщения в ветку перед созданием запуска.


Показать свойства
Инструкции
строка или null

Необязательный
Переопределяет инструкции помощника. Это полезно для изменения поведения при каждом запуске.

максимальные_комплетии_токены
целое число или null

Необязательный
Максимальное количество жетонов завершения, которые могут быть использованы в ходе выполнения задания. В ходе выполнения задания будет предпринята попытка использовать только указанное количество жетонов завершения на протяжении нескольких этапов выполнения задания. Если количество жетонов завершения превысит указанное, выполнение задания завершится со статусом incomplete. Дополнительные сведения см. в incomplete_details.

max_prompt_tokens
целое число или null

Необязательный
Максимальное количество токенов подсказок, которые могут быть использованы в ходе выполнения задания. При выполнении задания будет предпринята попытка использовать только указанное количество токенов подсказок на протяжении нескольких этапов выполнения задания. Если количество токенов подсказок превысит указанное, выполнение задания завершится со статусом incomplete. Дополнительные сведения см. в incomplete_details.

метаданные
Карта

Необязательный
Набор из 16 пар «ключ-значение», которые можно прикрепить к объекту. Это может быть полезно для хранения дополнительной информации об объекте в структурированном формате, а также для поиска объектов через API или панель управления.

Ключи — это строки максимальной длиной 64 символа. Значения — это строки максимальной длиной 512 символов.

Модель
строка

Необязательный
Идентификатор модели, которая будет использоваться для выполнения этого задания. Если здесь указано значение, оно переопределит модель, связанную с помощником. Если нет, будет использоваться модель, связанная с помощником.

parallel_tool_calls
логическое значение

Необязательный
По умолчанию используется значение true
Следует ли включать параллельный вызов функций во время использования инструмента.

рассуждение_эффект
строка или null

Необязательный
По умолчанию используется значение medium
только модели серии o

Ограничивает усилия по обработке данных для моделей обработки данных. В настоящее время поддерживаются значения low, medium, и high. Сокращение усилий по обработке данных может привести к ускорению ответов и уменьшению количества токенов, используемых для обработки данных в ответе.

формат_ответа
«авто» или объект

Необязательный
Указывает формат, который должна выдавать модель. Совместимо с GPT-4o, GPT-4 Turbo и всеми моделями GPT-3.5 Turbo, начиная с gpt-3.5-turbo-1106.

При значении { "type": "json_schema", "json_schema": {...} } включаются структурированные выходные данные, которые обеспечивают соответствие модели предоставленной вами схеме JSON. Подробнее см. в руководстве по структурированным выходным данным.

При установке значения { "type": "json_object" } включается режим JSON, который гарантирует, что сгенерированное моделью сообщение будет корректным JSON.

Важно: при использовании режима JSON вы должны также указать модели, что она должна самостоятельно генерировать JSON с помощью системного или пользовательского сообщения. Без этого модель может генерировать бесконечный поток пробелов до тех пор, пока генерация не достигнет лимита токенов, что приведёт к длительному и, по-видимому, «застрявшему» запросу. Также обратите внимание, что содержимое сообщения может быть частично обрезано, если finish_reason="length", что указывает на то, что генерация превысила max_tokens или разговор превысил максимальную длину контекста.


Показать возможные типы
поток
логическое значение или null

Необязательный
Если true возвращает поток событий, происходящих во время выполнения, в виде событий, отправляемых сервером, то выполнение завершается, когда Run переходит в конечное состояние с сообщением data: [DONE]

температура
число или null

Необязательный
Значение по умолчанию равно 1
Какую температуру выборки использовать — от 0 до 2. Более высокие значения, например 0,8, сделают результат более случайным, а более низкие значения, например 0,2, сделают его более целенаправленным и детерминированным.

tool_choice инструмент_choice
строка или объект

Необязательный
Управляет тем, какой инструмент (если таковой имеется) вызывается моделью. none означает, что модель не будет вызывать никаких инструментов, а вместо этого сгенерирует сообщение. auto — значение по умолчанию, означающее, что модель может выбрать между сгенерированием сообщения и вызовом одного или нескольких инструментов. required означает, что модель должна вызвать один или несколько инструментов, прежде чем отвечать пользователю. Указание конкретного инструмента, например {"type": "file_search"} или {"type": "function", "function": {"name": "my_function"}}, заставляет модель вызвать этот инструмент.


Показать возможные типы
Инструменты
массив или null

Необязательный
Переопределите инструменты, которые помощник может использовать для этого запуска. Это полезно для изменения поведения в каждом конкретном случае.


Показать возможные типы
top_p
число или null

Необязательный
Значение по умолчанию равно 1
Альтернативой выборке с температурой является ядерная выборка, при которой модель учитывает результаты токенов с наибольшей вероятностью. Таким образом, 0,1 означает, что учитываются только токены, составляющие 10% от общей вероятности.

Обычно мы рекомендуем менять либо это, либо температуру, но не оба параметра одновременно.

усечение_стратегии
объект или нуль

Необязательный
Управляет тем, как поток будет усекаться перед запуском. Используйте это для управления начальным контекстным окном при запуске.


Показать свойства
ВОЗВРАТ
Объект выполнения.


По умолчанию

Потоковая передача

Потоковая передача с функциями
Пример запроса
curl https://api.openai.com/v1/threads/thread_abc123/runs \
  -H "Authorization: Bearer $OPENAI_API_KEY" \
  -H "Content-Type: application/json" \
  -H "OpenAI-Beta: assistants=v2" \
  -d '{
    "assistant_id": "asst_abc123"
  }'
Ответ
{
  "id": "run_abc123",
  "object": "thread.run",
  "created_at": 1699063290,
  "assistant_id": "asst_abc123",
  "thread_id": "thread_abc123",
  "status": "queued",
  "started_at": 1699063290,
  "expires_at": null,
  "cancelled_at": null,
  "failed_at": null,
  "completed_at": 1699063291,
  "last_error": null,
  "model": "gpt-4o",
  "instructions": null,
  "incomplete_details": null,
  "tools": [
    {
      "type": "code_interpreter"
    }
  ],
  "metadata": {},
  "usage": null,
  "temperature": 1.0,
  "top_p": 1.0,
  "max_prompt_tokens": 1000,
  "max_completion_tokens": 1000,
  "truncation_strategy": {
    "type": "auto",
    "last_messages": null
  },
  "response_format": "auto",
  "tool_choice": "auto",
  "parallel_tool_calls": true
}
Создайте поток и запустите
Бета
post
 
https://api.openai.com/v1/threads/runs
Создайте поток и запустите его в рамках одного запроса.

Тело запроса
assistant_id
строка

Требуемый
Идентификатор помощника, который будет использоваться для выполнения этого задания.

Инструкции
строка или null

Необязательный
Переопределите системное сообщение помощника по умолчанию. Это полезно для изменения поведения при каждом запуске.

максимальные_комплетии_токены
целое число или null

Необязательный
Максимальное количество жетонов завершения, которые могут быть использованы в ходе выполнения задания. В ходе выполнения задания будет предпринята попытка использовать только указанное количество жетонов завершения на протяжении нескольких этапов выполнения задания. Если количество жетонов завершения превысит указанное, выполнение задания завершится со статусом incomplete. Дополнительные сведения см. в incomplete_details.

max_prompt_tokens
целое число или null

Необязательный
Максимальное количество токенов подсказок, которые могут быть использованы в ходе выполнения задания. При выполнении задания будет предпринята попытка использовать только указанное количество токенов подсказок на протяжении нескольких этапов выполнения задания. Если количество токенов подсказок превысит указанное, выполнение задания завершится со статусом incomplete. Дополнительные сведения см. в incomplete_details.

метаданные
Карта

Необязательный
Набор из 16 пар «ключ-значение», которые можно прикрепить к объекту. Это может быть полезно для хранения дополнительной информации об объекте в структурированном формате, а также для поиска объектов через API или панель управления.

Ключи — это строки максимальной длиной 64 символа. Значения — это строки максимальной длиной 512 символов.

Модель
строка

Необязательный
Идентификатор модели, которая будет использоваться для выполнения этого задания. Если здесь указано значение, оно переопределит модель, связанную с помощником. Если нет, будет использоваться модель, связанная с помощником.

parallel_tool_calls
логическое значение

Необязательный
По умолчанию используется значение true
Следует ли включать параллельный вызов функций во время использования инструмента.

формат_ответа
«авто» или объект

Необязательный
Указывает формат, который должна выдавать модель. Совместимо с GPT-4o, GPT-4 Turbo и всеми моделями GPT-3.5 Turbo, начиная с gpt-3.5-turbo-1106.

При значении { "type": "json_schema", "json_schema": {...} } включаются структурированные выходные данные, которые обеспечивают соответствие модели предоставленной вами схеме JSON. Подробнее см. в руководстве по структурированным выходным данным.

При установке значения { "type": "json_object" } включается режим JSON, который гарантирует, что сгенерированное моделью сообщение будет корректным JSON.

Важно: при использовании режима JSON вы должны также указать модели, что она должна самостоятельно генерировать JSON с помощью системного или пользовательского сообщения. Без этого модель может генерировать бесконечный поток пробелов до тех пор, пока генерация не достигнет лимита токенов, что приведёт к длительному и, по-видимому, «застрявшему» запросу. Также обратите внимание, что содержимое сообщения может быть частично обрезано, если finish_reason="length", что указывает на то, что генерация превысила max_tokens или разговор превысил максимальную длину контекста.


Показать возможные типы
поток
логическое значение или null

Необязательный
Если true возвращает поток событий, происходящих во время выполнения, в виде событий, отправляемых сервером, то выполнение завершается, когда Run переходит в конечное состояние с сообщением data: [DONE]

температура
число или null

Необязательный
Значение по умолчанию равно 1
Какую температуру выборки использовать — от 0 до 2. Более высокие значения, например 0,8, сделают результат более случайным, а более низкие значения, например 0,2, сделают его более целенаправленным и детерминированным.

Нитки
объект

Необязательный
Параметры для создания нового потока. Если при выполнении запроса не указан поток, будет создан пустой поток.


Показать свойства
tool_choice инструмент_choice
строка или объект

Необязательный
Управляет тем, какой инструмент (если таковой имеется) вызывается моделью. none означает, что модель не будет вызывать никаких инструментов, а вместо этого сгенерирует сообщение. auto — значение по умолчанию, означающее, что модель может выбрать между сгенерированием сообщения и вызовом одного или нескольких инструментов. required означает, что модель должна вызвать один или несколько инструментов, прежде чем отвечать пользователю. Указание конкретного инструмента, например {"type": "file_search"} или {"type": "function", "function": {"name": "my_function"}}, заставляет модель вызвать этот инструмент.


Показать возможные типы
tool_resources инструмент_ресурсы
объект или нуль

Необязательный
Набор ресурсов, используемых инструментами помощника. Ресурсы зависят от типа инструмента. Например, для инструмента code_interpreter требуется список идентификаторов файлов, а для инструмента file_search — список идентификаторов векторных хранилищ.


Показать свойства
Инструменты
массив или null

Необязательный
Переопределите инструменты, которые помощник может использовать для этого запуска. Это полезно для изменения поведения в каждом конкретном случае.


Показать возможные типы
top_p
число или null

Необязательный
Значение по умолчанию равно 1
Альтернативой выборке с температурой является ядерная выборка, при которой модель учитывает результаты токенов с наибольшей вероятностью. Таким образом, 0,1 означает, что учитываются только токены, составляющие 10% от общей вероятности.

Обычно мы рекомендуем менять либо это, либо температуру, но не оба параметра одновременно.

усечение_стратегии
объект или нуль

Необязательный
Управляет тем, как поток будет усекаться перед запуском. Используйте это для управления начальным контекстным окном при запуске.


Показать свойства
ВОЗВРАТ
Объект выполнения.


По умолчанию

Потоковая передача

Потоковая передача с функциями
Пример запроса
curl https://api.openai.com/v1/threads/runs \
  -H "Authorization: Bearer $OPENAI_API_KEY" \
  -H "Content-Type: application/json" \
  -H "OpenAI-Beta: assistants=v2" \
  -d '{
      "assistant_id": "asst_abc123",
      "thread": {
        "messages": [
          {"role": "user", "content": "Explain deep learning to a 5 year old."}
        ]
      }
    }'
Ответ
{
  "id": "run_abc123",
  "object": "thread.run",
  "created_at": 1699076792,
  "assistant_id": "asst_abc123",
  "thread_id": "thread_abc123",
  "status": "queued",
  "started_at": null,
  "expires_at": 1699077392,
  "cancelled_at": null,
  "failed_at": null,
  "completed_at": null,
  "required_action": null,
  "last_error": null,
  "model": "gpt-4o",
  "instructions": "You are a helpful assistant.",
  "tools": [],
  "tool_resources": {},
  "metadata": {},
  "temperature": 1.0,
  "top_p": 1.0,
  "max_completion_tokens": null,
  "max_prompt_tokens": null,
  "truncation_strategy": {
    "type": "auto",
    "last_messages": null
  },
  "incomplete_details": null,
  "usage": null,
  "response_format": "auto",
  "tool_choice": "auto",
  "parallel_tool_calls": true
}
Запуск списка
Бета
получить
 
https://api.openai.com/v1/threads/{идентификатор_темы}/runs
Возвращает список запусков, относящихся к потоку.

Параметры пути
thread_id
строка

Требуемый
Идентификатор потока, к которому относится выполнение.

Параметры запроса
после
строка

Необязательный
Курсор для использования в разбивке на страницы. after — это идентификатор объекта, определяющий ваше место в списке. Например, если вы отправляете запрос на получение списка и получаете 100 объектов, заканчивающихся на obj_foo, ваш последующий вызов может включать after=obj_foo, чтобы получить следующую страницу списка.

до того , как
строка

Необязательный
Курсор для использования в разбиении на страницы. before — это идентификатор объекта, определяющий ваше место в списке. Например, если вы отправляете запрос на получение списка и получаете 100 объектов, начиная с obj_foo, ваш последующий вызов может включать параметр before=obj_foo, чтобы получить предыдущую страницу списка.

предел
целое число

Необязательный
Значение по умолчанию равно 20
Ограничение на количество возвращаемых объектов. Ограничение может составлять от 1 до 100, по умолчанию — 20.

порядок
строка

Необязательный
Значение по умолчанию равно desc
Сортировка по метке времени created_at объектов. asc для сортировки по возрастанию и desc для сортировки по убыванию.

ВОЗВРАТ
Список объектов выполнения.

Пример запроса
curl https://api.openai.com/v1/threads/thread_abc123/runs \
  -H "Authorization: Bearer $OPENAI_API_KEY" \
  -H "Content-Type: application/json" \
  -H "OpenAI-Beta: assistants=v2"
Ответ
{
  "object": "list",
  "data": [
    {
      "id": "run_abc123",
      "object": "thread.run",
      "created_at": 1699075072,
      "assistant_id": "asst_abc123",
      "thread_id": "thread_abc123",
      "status": "completed",
      "started_at": 1699075072,
      "expires_at": null,
      "cancelled_at": null,
      "failed_at": null,
      "completed_at": 1699075073,
      "last_error": null,
      "model": "gpt-4o",
      "instructions": null,
      "incomplete_details": null,
      "tools": [
        {
          "type": "code_interpreter"
        }
      ],
      "tool_resources": {
        "code_interpreter": {
          "file_ids": [
            "file-abc123",
            "file-abc456"
          ]
        }
      },
      "metadata": {},
      "usage": {
        "prompt_tokens": 123,
        "completion_tokens": 456,
        "total_tokens": 579
      },
      "temperature": 1.0,
      "top_p": 1.0,
      "max_prompt_tokens": 1000,
      "max_completion_tokens": 1000,
      "truncation_strategy": {
        "type": "auto",
        "last_messages": null
      },
      "response_format": "auto",
      "tool_choice": "auto",
      "parallel_tool_calls": true
    },
    {
      "id": "run_abc456",
      "object": "thread.run",
      "created_at": 1699063290,
      "assistant_id": "asst_abc123",
      "thread_id": "thread_abc123",
      "status": "completed",
      "started_at": 1699063290,
      "expires_at": null,
      "cancelled_at": null,
      "failed_at": null,
      "completed_at": 1699063291,
      "last_error": null,
      "model": "gpt-4o",
      "instructions": null,
      "incomplete_details": null,
      "tools": [
        {
          "type": "code_interpreter"
        }
      ],
      "tool_resources": {
        "code_interpreter": {
          "file_ids": [
            "file-abc123",
            "file-abc456"
          ]
        }
      },
      "metadata": {},
      "usage": {
        "prompt_tokens": 123,
        "completion_tokens": 456,
        "total_tokens": 579
      },
      "temperature": 1.0,
      "top_p": 1.0,
      "max_prompt_tokens": 1000,
      "max_completion_tokens": 1000,
      "truncation_strategy": {
        "type": "auto",
        "last_messages": null
      },
      "response_format": "auto",
      "tool_choice": "auto",
      "parallel_tool_calls": true
    }
  ],
  "first_id": "run_abc123",
  "last_id": "run_abc456",
  "has_more": false
}
Извлекать , запускать
Бета
получить
 
https://api.openai.com/v1/threads/{thread_id}/runs/{run_id}
Выполняет забег.

Параметры пути
run_id ( идентификатор запуска )
строка

Требуемый
Идентификатор выполняемого задания.

thread_id
строка

Требуемый
Идентификатор потока, который был запущен.

ВОЗВРАТ
Объект выполнения, соответствующий указанному идентификатору.

Пример запроса
curl https://api.openai.com/v1/threads/thread_abc123/runs/run_abc123 \
  -H "Authorization: Bearer $OPENAI_API_KEY" \
  -H "OpenAI-Beta: assistants=v2"
Ответ
{
  "id": "run_abc123",
  "object": "thread.run",
  "created_at": 1699075072,
  "assistant_id": "asst_abc123",
  "thread_id": "thread_abc123",
  "status": "completed",
  "started_at": 1699075072,
  "expires_at": null,
  "cancelled_at": null,
  "failed_at": null,
  "completed_at": 1699075073,
  "last_error": null,
  "model": "gpt-4o",
  "instructions": null,
  "incomplete_details": null,
  "tools": [
    {
      "type": "code_interpreter"
    }
  ],
  "metadata": {},
  "usage": {
    "prompt_tokens": 123,
    "completion_tokens": 456,
    "total_tokens": 579
  },
  "temperature": 1.0,
  "top_p": 1.0,
  "max_prompt_tokens": 1000,
  "max_completion_tokens": 1000,
  "truncation_strategy": {
    "type": "auto",
    "last_messages": null
  },
  "response_format": "auto",
  "tool_choice": "auto",
  "parallel_tool_calls": true
}
Изменить запуск
Бета
post
 
https://api.openai.com/v1/threads/{thread_id}/runs/{run_id}
Изменяет запуск.

Параметры пути
run_id ( идентификатор запуска )
строка

Требуемый
Идентификатор запускаемого процесса для изменения.

thread_id
строка

Требуемый
Идентификатор потока, который был запущен.

Тело запроса
метаданные
Карта

Необязательный
Набор из 16 пар «ключ-значение», которые можно прикрепить к объекту. Это может быть полезно для хранения дополнительной информации об объекте в структурированном формате, а также для поиска объектов через API или панель управления.

Ключи — это строки максимальной длиной 64 символа. Значения — это строки максимальной длиной 512 символов.

ВОЗВРАТ
Изменённый объект выполнения, соответствующий указанному идентификатору.

Пример запроса
curl https://api.openai.com/v1/threads/thread_abc123/runs/run_abc123 \
  -H "Authorization: Bearer $OPENAI_API_KEY" \
  -H "Content-Type: application/json" \
  -H "OpenAI-Beta: assistants=v2" \
  -d '{
    "metadata": {
      "user_id": "user_abc123"
    }
  }'
Ответ
{
  "id": "run_abc123",
  "object": "thread.run",
  "created_at": 1699075072,
  "assistant_id": "asst_abc123",
  "thread_id": "thread_abc123",
  "status": "completed",
  "started_at": 1699075072,
  "expires_at": null,
  "cancelled_at": null,
  "failed_at": null,
  "completed_at": 1699075073,
  "last_error": null,
  "model": "gpt-4o",
  "instructions": null,
  "incomplete_details": null,
  "tools": [
    {
      "type": "code_interpreter"
    }
  ],
  "tool_resources": {
    "code_interpreter": {
      "file_ids": [
        "file-abc123",
        "file-abc456"
      ]
    }
  },
  "metadata": {
    "user_id": "user_abc123"
  },
  "usage": {
    "prompt_tokens": 123,
    "completion_tokens": 456,
    "total_tokens": 579
  },
  "temperature": 1.0,
  "top_p": 1.0,
  "max_prompt_tokens": 1000,
  "max_completion_tokens": 1000,
  "truncation_strategy": {
    "type": "auto",
    "last_messages": null
  },
  "response_format": "auto",
  "tool_choice": "auto",
  "parallel_tool_calls": true
}
Отправка выходных данных инструмента для запуска
Бета
post
 
https://api.openai.com/v1/threads/{thread_id}/runs/{run_id}/submit_tool_outputs
Когда выполнение задания имеет статус status: "requires_action" и required_action.type равно submit_tool_outputs, эту конечную точку можно использовать для отправки результатов работы инструмента после их завершения. Все результаты должны быть отправлены в одном запросе.

Параметры пути
run_id ( идентификатор запуска )
строка

Требуемый
Идентификатор запуска, для которого требуется отправка выходных данных инструмента.

thread_id
строка

Требуемый
Идентификатор потока, которому принадлежит этот запуск.

Тело запроса
выходы tool_outputs
массив

Требуемый
Список инструментов, результаты работы которых будут представлены.


Показать свойства
поток
логическое значение или null

Необязательный
Если true возвращает поток событий, происходящих во время выполнения, в виде событий, отправляемых сервером, то выполнение завершается, когда Run переходит в конечное состояние с сообщением data: [DONE]

ВОЗВРАТ
Изменённый объект выполнения, соответствующий указанному идентификатору.


По умолчанию

Потоковое вещание
Пример запроса
curl https://api.openai.com/v1/threads/thread_123/runs/run_123/submit_tool_outputs \
  -H "Authorization: Bearer $OPENAI_API_KEY" \
  -H "Content-Type: application/json" \
  -H "OpenAI-Beta: assistants=v2" \
  -d '{
    "tool_outputs": [
      {
        "tool_call_id": "call_001",
        "output": "70 degrees and sunny."
      }
    ]
  }'
Ответ
{
  "id": "run_123",
  "object": "thread.run",
  "created_at": 1699075592,
  "assistant_id": "asst_123",
  "thread_id": "thread_123",
  "status": "queued",
  "started_at": 1699075592,
  "expires_at": 1699076192,
  "cancelled_at": null,
  "failed_at": null,
  "completed_at": null,
  "last_error": null,
  "model": "gpt-4o",
  "instructions": null,
  "tools": [
    {
      "type": "function",
      "function": {
        "name": "get_current_weather",
        "description": "Get the current weather in a given location",
        "parameters": {
          "type": "object",
          "properties": {
            "location": {
              "type": "string",
              "description": "The city and state, e.g. San Francisco, CA"
            },
            "unit": {
              "type": "string",
              "enum": ["celsius", "fahrenheit"]
            }
          },
          "required": ["location"]
        }
      }
    }
  ],
  "metadata": {},
  "usage": null,
  "temperature": 1.0,
  "top_p": 1.0,
  "max_prompt_tokens": 1000,
  "max_completion_tokens": 1000,
  "truncation_strategy": {
    "type": "auto",
    "last_messages": null
  },
  "response_format": "auto",
  "tool_choice": "auto",
  "parallel_tool_calls": true
}
Отменить запуск
Бета
пост
 
https://api.openai.com/v1/threads/{идентификатор_потока}/runs/{идентификатор_запуска}/cancel
Отменяет выполнение, которое является in_progress.

Параметры пути
run_id ( идентификатор запуска )
строка

Требуемый
Идентификатор выполняемого задания для отмены.

thread_id
строка

Требуемый
Идентификатор потока, к которому относится этот запуск.

ВОЗВРАТ
Изменённый объект выполнения, соответствующий указанному идентификатору.

Пример запроса
curl https://api.openai.com/v1/threads/thread_abc123/runs/run_abc123/cancel \
  -H "Authorization: Bearer $OPENAI_API_KEY" \
  -H "OpenAI-Beta: assistants=v2" \
  -X POST
Ответ
{
  "id": "run_abc123",
  "object": "thread.run",
  "created_at": 1699076126,
  "assistant_id": "asst_abc123",
  "thread_id": "thread_abc123",
  "status": "cancelling",
  "started_at": 1699076126,
  "expires_at": 1699076726,
  "cancelled_at": null,
  "failed_at": null,
  "completed_at": null,
  "last_error": null,
  "model": "gpt-4o",
  "instructions": "You summarize books.",
  "tools": [
    {
      "type": "file_search"
    }
  ],
  "tool_resources": {
    "file_search": {
      "vector_store_ids": ["vs_123"]
    }
  },
  "metadata": {},
  "usage": null,
  "temperature": 1.0,
  "top_p": 1.0,
  "response_format": "auto",
  "tool_choice": "auto",
  "parallel_tool_calls": true
}
Запускаемый объект
Бета
Представляет собой выполнение задачи в потоке.

assistant_id
строка

Идентификатор помощника, использованного для выполнения этого задания.

отменен_ат
целое число или null

Временная метка Unix (в секундах) для момента отмены запуска.

завершенный_ат
целое число или null

Временная метка Unix (в секундах) для обозначения времени завершения запуска.

созданный_ат
целое число

Метка времени Unix (в секундах) для создания запуска.

истекающий срок действия
целое число или null

Метка времени Unix (в секундах) для определения времени окончания выполнения.

неудачный запуск_at
целое число или null

Метка времени Unix (в секундах) для записи о неудачном запуске.

ID
строка

Идентификатор, на который можно ссылаться в конечных точках API.

незавершенные детали
объект или нуль

Подробная информация о том, почему выполнение не завершено. Будет null если выполнение не завершено.


Показать свойства
Инструкции
строка

Инструкции, которые помощник использовал для этого запуска.

последняя ошибка
объект или нуль

Последняя ошибка, связанная с этим запуском. Будет null при отсутствии ошибок.


Показать свойства
максимальные_комплетии_токены
целое число или null

Максимальное количество токенов завершения, использованных в ходе выполнения.

max_prompt_tokens
целое число или null

Максимальное количество токенов, которые можно использовать в ходе выполнения.

метаданные
Карта

Набор из 16 пар «ключ-значение», которые можно прикрепить к объекту. Это может быть полезно для хранения дополнительной информации об объекте в структурированном формате, а также для поиска объектов через API или панель управления.

Ключи — это строки максимальной длиной 64 символа. Значения — это строки максимальной длиной 512 символов.

Модель
строка

Модель, которую помощник использовал для этого запуска.

объект
строка

Тип объекта, который всегда обозначается как thread.run.

parallel_tool_calls
логическое значение

Следует ли включать параллельный вызов функций во время использования инструмента.

требуемое действие
объект или нуль

Подробная информация о действиях, необходимых для продолжения работы. Если никаких действий не требуется, будет null


Показать свойства
формат_ответа
«авто» или объект

Указывает формат, который должна выдавать модель. Совместимо с GPT-4o, GPT-4 Turbo и всеми моделями GPT-3.5 Turbo, начиная с gpt-3.5-turbo-1106.

При значении { "type": "json_schema", "json_schema": {...} } включаются структурированные выходные данные, которые обеспечивают соответствие модели предоставленной вами схеме JSON. Подробнее см. в руководстве по структурированным выходным данным.

При установке значения { "type": "json_object" } включается режим JSON, который гарантирует, что сгенерированное моделью сообщение будет корректным JSON.

Важно: при использовании режима JSON вы должны также указать модели, что она должна самостоятельно генерировать JSON с помощью системного или пользовательского сообщения. Без этого модель может генерировать бесконечный поток пробелов до тех пор, пока генерация не достигнет лимита токенов, что приведёт к длительному и, по-видимому, «застрявшему» запросу. Также обратите внимание, что содержимое сообщения может быть частично обрезано, если finish_reason="length", что указывает на то, что генерация превысила max_tokens или разговор превысил максимальную длину контекста.


Показать возможные типы
начато_ат
целое число или null

Метка времени Unix (в секундах) для начала выполнения.

Статус
строка

Статус выполнения, который может быть следующим: queued, in_progress, requires_action, cancelling, cancelled, failed, completed, incomplete, или expired.

температура
число или null

Температура отбора проб, используемая в этом запуске. Если значение не задано, по умолчанию используется значение 1.

thread_id
строка

Идентификатор потока, который был запущен в рамках этого выполнения.

tool_choice инструмент_choice
строка или объект

Управляет тем, какой инструмент (если таковой имеется) вызывается моделью. none означает, что модель не будет вызывать никаких инструментов, а вместо этого сгенерирует сообщение. auto — значение по умолчанию, означающее, что модель может выбрать между сгенерированием сообщения и вызовом одного или нескольких инструментов. required означает, что модель должна вызвать один или несколько инструментов, прежде чем отвечать пользователю. Указание конкретного инструмента, например {"type": "file_search"} или {"type": "function", "function": {"name": "my_function"}}, заставляет модель вызвать этот инструмент.


Показать возможные типы
Инструменты
массив

Список инструментов, которые помощник использовал для этого запуска.


Показать возможные типы
top_p
число или null

Значение выборки ядер, используемое в этом запуске. Если значение не задано, по умолчанию используется значение 1.

усечение_стратегии
объект или нуль

Управляет тем, как поток будет усекаться перед запуском. Используйте это для управления начальным контекстным окном при запуске.


Показать свойства
использование
объект или нуль

Статистика использования, связанная с выполнением. Это значение будет равно null, если выполнение не завершено (т. е. in_progress, queued, и т. д.).


Показать свойства
OBJECT Объект запуска
{
  "id": "run_abc123",
  "object": "thread.run",
  "created_at": 1698107661,
  "assistant_id": "asst_abc123",
  "thread_id": "thread_abc123",
  "status": "completed",
  "started_at": 1699073476,
  "expires_at": null,
  "cancelled_at": null,
  "failed_at": null,
  "completed_at": 1699073498,
  "last_error": null,
  "model": "gpt-4o",
  "instructions": null,
  "tools": [{"type": "file_search"}, {"type": "code_interpreter"}],
  "metadata": {},
  "incomplete_details": null,
  "usage": {
    "prompt_tokens": 123,
    "completion_tokens": 456,
    "total_tokens": 579
  },
  "temperature": 1.0,
  "top_p": 1.0,
  "max_prompt_tokens": 1000,
  "max_completion_tokens": 1000,
  "truncation_strategy": {
    "type": "auto",
    "last_messages": null
  },
  "response_format": "auto",
  "tool_choice": "auto",
  "parallel_tool_calls": true
}
Выполнять шаги
Бета
Отображает шаги (вызовы модели и инструментов), выполненные во время выполнения.

Соответствующее руководство: Помощники

Перечислите шаги запуска
Бета
получить
 
https://api.openai.com/v1/threads/{идентификатор_темы}/runs/{идентификатор_выполнения}/steps
Возвращает список шагов выполнения, относящихся к прогону.

Параметры пути
run_id ( идентификатор запуска )
строка

Требуемый
Идентификатор выполнения, к которому относятся шаги выполнения.

thread_id
строка

Требуемый
Идентификатор потока, к которому относятся шаги запуска и выполнения.

Параметры запроса
после
строка

Необязательный
Курсор для использования в разбивке на страницы. after — это идентификатор объекта, определяющий ваше место в списке. Например, если вы отправляете запрос на получение списка и получаете 100 объектов, заканчивающихся на obj_foo, ваш последующий вызов может включать after=obj_foo, чтобы получить следующую страницу списка.

до того , как
строка

Необязательный
Курсор для использования в разбиении на страницы. before — это идентификатор объекта, определяющий ваше место в списке. Например, если вы отправляете запрос на получение списка и получаете 100 объектов, начиная с obj_foo, ваш последующий вызов может включать параметр before=obj_foo, чтобы получить предыдущую страницу списка.

включить[]
массив

Необязательный
Список дополнительных полей для включения в ответ. В настоящее время поддерживается только значение step_details.tool_calls[*].file_search.results[*].content для получения содержимого результатов поиска файлов.

Дополнительную информацию см. в документации по инструменту поиска файлов.

предел
целое число

Необязательный
Значение по умолчанию равно 20
Ограничение на количество возвращаемых объектов. Ограничение может составлять от 1 до 100, по умолчанию — 20.

порядок
строка

Необязательный
Значение по умолчанию равно desc
Сортировка по метке времени created_at объектов. asc для сортировки по возрастанию и desc для сортировки по убыванию.

ВОЗВРАТ
Список объектов выполнения шага.

Пример запроса
curl https://api.openai.com/v1/threads/thread_abc123/runs/run_abc123/steps \
  -H "Authorization: Bearer $OPENAI_API_KEY" \
  -H "Content-Type: application/json" \
  -H "OpenAI-Beta: assistants=v2"
Ответ
{
  "object": "list",
  "data": [
    {
      "id": "step_abc123",
      "object": "thread.run.step",
      "created_at": 1699063291,
      "run_id": "run_abc123",
      "assistant_id": "asst_abc123",
      "thread_id": "thread_abc123",
      "type": "message_creation",
      "status": "completed",
      "cancelled_at": null,
      "completed_at": 1699063291,
      "expired_at": null,
      "failed_at": null,
      "last_error": null,
      "step_details": {
        "type": "message_creation",
        "message_creation": {
          "message_id": "msg_abc123"
        }
      },
      "usage": {
        "prompt_tokens": 123,
        "completion_tokens": 456,
        "total_tokens": 579
      }
    }
  ],
  "first_id": "step_abc123",
  "last_id": "step_abc456",
  "has_more": false
}
Извлекать шаг выполнения
Бета
получить
 
https://api.openai.com/v1/threads/{thread_id}/runs/{run_id}/steps/{step_id}
Возвращает шаг выполнения.

Параметры пути
run_id ( идентификатор запуска )
строка

Требуемый
Идентификатор запуска, к которому относится шаг запуска.

step_id ( идентификатор шага )
строка

Требуемый
Идентификатор шага выполнения для получения данных.

thread_id
строка

Требуемый
Идентификатор потока, которому принадлежит команда run и шаг run.

Параметры запроса
включить[]
массив

Необязательный
Список дополнительных полей для включения в ответ. В настоящее время поддерживается только значение step_details.tool_calls[*].file_search.results[*].content для получения содержимого результатов поиска файлов.

Дополнительную информацию см. в документации по инструменту поиска файлов.

ВОЗВРАТ
Объект выполнения шага, соответствующий указанному идентификатору.

Пример запроса
curl https://api.openai.com/v1/threads/thread_abc123/runs/run_abc123/steps/step_abc123 \
  -H "Authorization: Bearer $OPENAI_API_KEY" \
  -H "Content-Type: application/json" \
  -H "OpenAI-Beta: assistants=v2"
Ответ
{
  "id": "step_abc123",
  "object": "thread.run.step",
  "created_at": 1699063291,
  "run_id": "run_abc123",
  "assistant_id": "asst_abc123",
  "thread_id": "thread_abc123",
  "type": "message_creation",
  "status": "completed",
  "cancelled_at": null,
  "completed_at": 1699063291,
  "expired_at": null,
  "failed_at": null,
  "last_error": null,
  "step_details": {
    "type": "message_creation",
    "message_creation": {
      "message_id": "msg_abc123"
    }
  },
  "usage": {
    "prompt_tokens": 123,
    "completion_tokens": 456,
    "total_tokens": 579
  }
}
Объект шага выполнения
Бета
Представляет собой этап выполнения задания.

assistant_id
строка

Идентификатор помощника, связанного с этапом выполнения.

отменен_ат
целое число или null

Метка времени Unix (в секундах), указывающая на время отмены шага выполнения.

завершенный_ат
целое число или null

Метка времени Unix (в секундах) для этапа выполнения.

созданный_ат
целое число

Метка времени Unix (в секундах), указывающая на время создания шага выполнения.

истекший срок действия
целое число или null

Метка времени Unix (в секундах), указывающая на то, что срок выполнения шага истёк. Шаг считается просроченным, если срок выполнения родительского шага истёк.

неудачный запуск_at
целое число или null

Метка времени Unix (в секундах), указывающая на сбой на этапе выполнения.

ID
строка

Идентификатор этапа выполнения, на который можно ссылаться в конечных точках API.

последняя ошибка
объект или нуль

Последняя ошибка, связанная с этим этапом выполнения. Будет null при отсутствии ошибок.


Показать свойства
метаданные
Карта

Набор из 16 пар «ключ-значение», которые можно прикрепить к объекту. Это может быть полезно для хранения дополнительной информации об объекте в структурированном формате, а также для поиска объектов через API или панель управления.

Ключи — это строки максимальной длиной 64 символа. Значения — это строки максимальной длиной 512 символов.

объект
строка

Тип объекта, который всегда обозначается как thread.run.step.

run_id ( идентификатор запуска )
строка

Идентификатор запуска, частью которого является этот шаг запуска.

Статус
строка

Статус шага выполнения, который может быть равен in_progress, cancelled, failed, completed или expired.

шаг_детали
объект

Подробная информация о шаге выполнения.


Показать возможные типы
thread_id
строка

Идентификатор потока, который был запущен.

Тип
строка

Тип шага выполнения, который может быть либо message_creation, либо tool_calls.

использование
объект или нуль

Статистика использования, связанная с этапом выполнения. Это значение будет равно null до тех пор, пока статус этапа выполнения не станет in_progress.


Показать свойства
ОБЪЕКТ Объект на этапе выполнения
{
  "id": "step_abc123",
  "object": "thread.run.step",
  "created_at": 1699063291,
  "run_id": "run_abc123",
  "assistant_id": "asst_abc123",
  "thread_id": "thread_abc123",
  "type": "message_creation",
  "status": "completed",
  "cancelled_at": null,
  "completed_at": 1699063291,
  "expired_at": null,
  "failed_at": null,
  "last_error": null,
  "step_details": {
    "type": "message_creation",
    "message_creation": {
      "message_id": "msg_abc123"
    }
  },
  "usage": {
    "prompt_tokens": 123,
    "completion_tokens": 456,
    "total_tokens": 579
  }
}
Потоковое вещание
Бета
Потоковая передача результатов выполнения задания или возобновления выполнения задания после отправки выходных данных инструмента. Вы можете передавать события с конечных точек Создание потока и выполнение задания, Создание выполнения задания и Отправка выходных данных инструмента, передавая "stream": true. Ответом будет поток событий, отправляемых сервером. Наши SDK для Node и Python предоставляют полезные утилиты для упрощения потоковой передачи. Подробнее см. в кратком руководстве по API помощников.

Дельта - объект сообщения
Бета
Представляет собой дельту сообщения, то есть все изменённые поля сообщения во время потоковой передачи.

дельта
объект

Дельта, содержащая поля, которые изменились в сообщении.


Показать свойства
ID
строка

Идентификатор сообщения, на который можно ссылаться в конечных точках API.

объект
строка

Тип объекта, который всегда обозначается как thread.message.delta.

ОБЪЕКТ Объект дельта-сообщения
{
  "id": "msg_123",
  "object": "thread.message.delta",
  "delta": {
    "content": [
      {
        "index": 0,
        "type": "text",
        "text": { "value": "Hello", "annotations": [] }
      }
    ]
  }
}
Дельта -объект шага выполнения
Бета
Представляет собой дельту шага выполнения, то есть любые изменённые поля на шаге выполнения во время потоковой передачи.

дельта
объект

Дельта, содержащая поля, которые изменились на этапе выполнения.


Показать свойства
ID
строка

Идентификатор этапа выполнения, на который можно ссылаться в конечных точках API.

объект
строка

Тип объекта, который всегда обозначается как thread.run.step.delta.

ОБЪЕКТ Дельта-объект шага выполнения
{
  "id": "step_123",
  "object": "thread.run.step.delta",
  "delta": {
    "step_details": {
      "type": "tool_calls",
      "tool_calls": [
        {
          "index": 0,
          "id": "call_123",
          "type": "code_interpreter",
          "code_interpreter": { "input": "", "outputs": [] }
        }
      ]
    }
  }
}
Ассистент транслирует события
Бета
Представляет собой событие, возникающее при потоковой передаче выполнения задания.

Каждое событие в потоке событий, отправляемых сервером, имеет свойства event и data:

event: thread.created
data: {"id": "thread_123", "object": "thread", ...}
Мы генерируем события всякий раз, когда создаётся новый объект, происходит переход в новое состояние или происходит поэтапная передача (дельта-передача). Например, мы генерируем thread.run.created при создании нового запуска, thread.run.completed при завершении запуска и так далее. Когда Ассистент решает создать сообщение во время запуска, мы генерируем thread.message.created event, thread.message.in_progress событие, множество thread.message.delta событий и, наконец, thread.message.completed событие.

Со временем мы можем добавить дополнительные события, поэтому мы рекомендуем корректно обрабатывать неизвестные события в вашем коде. Чтобы узнать, как интегрировать Assistants API с потоковой передачей, см. краткое руководство по Assistants API.

Выполнено
data является [DONE]

Возникает, когда поток заканчивается.

ошибка
data является ошибкой

Возникает при возникновении ошибки. Это может произойти из-за внутренней ошибки сервера или истечения времени ожидания.

поток.создан
data является потоком

Происходит при создании нового потока.

поток.сообщение.завершено
data это сообщение

Происходит, когда сообщение завершено.

поток.сообщение.создано
data это сообщение

Происходит при создании сообщения.

поток. сообщение. дельта
data это дельта сообщения

Происходит, когда части сообщения передаются в потоковом режиме.

поток. сообщение. в процессе обработки
data это сообщение

Происходит, когда сообщение переходит в состояние in_progress.

сообщение в потоке. неполное сообщение
data это сообщение

Возникает, когда сообщение заканчивается до того, как оно было завершено.

выполнение потока прервано
data является пробегом

Происходит, когда запуск отменяется.

thread.run.отмена
data является пробегом

Происходит, когда запуск переходит в состояние cancelling.

поток.запуск.завершен
data является пробегом

Происходит после завершения запуска.

поток.выполнить.создан
data является пробегом

Происходит при создании нового запуска.

поток. запущен. истек срок действия
data является пробегом

Происходит, когда срок действия запуска истекает.

поток.выполнить.неудалось
data является пробегом

Возникает, когда запуск завершается неудачно.

поток. выполняется. в процессе
data является пробегом

Происходит, когда запуск переходит в состояние in_progress.

поток. выполнение. незавершённое
data является пробегом

Возникает, когда запуск завершается со статусом incomplete.

поток. запущен. поставлен в очередь
data является пробегом

Происходит, когда запуск переходит в состояние queued.

поток. запустить. требуется действие
data является пробегом

Происходит, когда запуск переходит в состояние requires_action.

thread.run.step.отменён
data это этап выполнения

Возникает при отмене этапа выполнения.

поток. выполнение. шаг. завершён
data это этап выполнения

Происходит, когда шаг выполнения завершён.

поток. выполнение. шаг. создан
data это этап выполнения

Происходит при создании этапа выполнения.

поток. выполнение. шаг. дельта
data это шаг выполнения дельты

Происходит, когда части этапа выполнения передаются по сети.

поток. выполнение. шаг. истек срок действия
data это этап выполнения

Происходит, когда истекает время выполнения шага.

поток. выполнение. сбой.
data это этап выполнения

Возникает, когда шаг выполнения завершается неудачно.

поток. выполнение. текущий этап.
data это этап выполнения

Происходит, когда шаг выполнения переходит в состояние in_progress.